<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <record id="lerm_eln_forms" model="ir.ui.view">
            <field name="name">lerm.eln.form</field>
            <field name="model">lerm.eln</field>
            <field name="arch" type="xml">
                <form string="ELN">
                <header>
                    <button
                    type="object"
                    name="confirm_eln"
                    string="Confirm"
                    attrs="{'invisible': [('state', 'not in', ('1-draft','4-rejected'))]}" />      
                    <field readonly="1" name="state" widget="statusbar" statusbar_visible="1-draft,2-confirm,3-approved"/>
                </header>
                    <sheet>
                        <group style="width:100%">
                            <field name='eln_id' invisible="1"/>
                            <field name='technician'/>
                        </group>
                        <group>
                            <group style="width:50%">
                                <field name='srf_id'/>
                                <field name='srf_date'/>
                                <field name='discipline'/>
                                <field name='material'/>
                                <field name='size_id'/>
                                <field name='start_date'/>
                                <field name='witness_description'/>
                                <field name='casting_date'/>
                                <field name='remarks'/>
                                <field name='conformity' readonly="1"/>
                                <field name='has_witness' readonly="1" />
                                <field name='invisible_fetch_inputs' invisible="1" />

                            </group>
                            <group style="width:50%">
                                <field name='sample_id'/>
                                <field name='kes_no'/>
                                <field name='group'/>
                                <field name='witness_name'/>
                                <field name='grade_id'/>
                                <field name='end_date'/>
                                <field name="witness_photo" filename='witness_photo_name'/>
                                <field name='witness_photo_name' invisible='1'/>
                                <field name='attachment' filename='attachment_name'/>
                                <field name='attachment_name' invisible='1'/>
                            </group>
                        </group>
                        <group style="width:50%" invisible="1">
                            <field name="datasheets" nolabel="1">
                                <tree>
                                    <field name="datasheet"/>
                                    <field name="spreadsheet_template" />
                                    <field name="related_parameters" widget="badge"/>
                                </tree>
                            </field>
                            <field name='fetch_ds_button' widget="fetch_datasheet" nolabel="1"/>
                            <field name='update_result' widget="update_result" nolabel="1"/>
                        </group>

                        <group style="width:100%" invisible="1">

                            <field name="parameters" nolabel="1">
                                <tree>
                                    <field name="parameter"/>
                                    <field name='test_method'/>
                                    <field name='result'/>
                                    <field name="spreadsheet_template"/>
                                    <field name='specification'/>
                                    <!-- <field name='button' widget="datasheet"/>                          -->
                                </tree>
                            </field>
                        </group>

                        

                            <field name="parameters_result" nolabel="1">
                                <tree editable="bottom" >
                                    <field name="parameter"/>
                                    <field name="result" />
                                    <field name="context_data" />
                                    <field name="calculation_type" />
                                    <field name="calculated" readonly="1"/>
                                    <field name="unit" />
                                    <field name="specification" />
                                    <field name="test_method" />
                                    <field name="nabl_status" readonly="1"/>
                                    <field name="conformity_status" readonly="1"/>
                                    <field name="model_id" readonly="1"/>
                                    <button string="Calculation" name="open_calculation_wizard" type="object" class="oe_highlight" attrs="{'invisible': [('calculation_type','=','form_based')]}" />
                                    <button string="Open Form" name="open_form" type="object" class="oe_highlight" attrs="{'invisible': [('calculation_type','=','parameter_based')]}" />
                                </tree>
                            </field>
                        

                        <button string="Fetch Inputs" name="fetch_inputs"  type="object" attrs="{'invisible': [('invisible_fetch_inputs', '=', True)]}"/>
                        <!-- <button string="Calculate Graph" name="calculate_graphs"  type="object"/> -->
                            <!-- <field name='fetch_ds_button' widget="fetch_datasheet" nolabel="1"/>
                            <field name='update_result' widget="update_result" nolabel="1"/> -->
                        <group>
                            <field name="name"/>
                            <field name="image" widget="image"/>
                        </group>
                        <group style="width:100%">
                            <field name="parameters_input" nolabel="1">
                                <tree editable="bottom">
                                    <field name="parameter_result"/>
                                    <field name="is_parameter_dependent"/>
                                    <field name="identifier" invisible="1" />
                                    <field name="inputs" />
                                    <field name="value" />
                                    <field name="date_time" />
                                </tree>
                            </field>
                            <!-- <field name='fetch_ds_button' widget="fetch_datasheet" nolabel="1"/>
                            <field name='update_result' widget="update_result" nolabel="1"/> -->
                        </group>

                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name= "message_ids" widget="mail_thread"/>
                        <field name= "activity_ids" widget="mail_activity"/>
                    </div>
                </form>
            </field>
        </record>

        <record id="lerm_eln_spreadsheet" model="ir.ui.view">
            <field name="name">eln.spreadsheets.form</field>
            <field name="model">eln.spreadsheets</field>
            <field name="arch" type="xml">
                <form string="Spread Sheet">
                    <sheet>
                        <field name='datasheet'/>
                        <field name='spreadsheet_template'/>
                        <field name='related_parameters'/>
                        <field name='fill_datasheet' widget="fill_datasheet" />
                        
                    </sheet>
                </form>
            </field>
        </record>


        <record id="lerm_eln_parameters_form" model="ir.ui.view">
            <field name="name">eln.parameters.form</field>
            <field name="model">eln.parameters</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <group invisible="1" style="width:50%">
                            <field name='eln_id'/>

                        </group>
                        <group style="width:100%">
                            <field name='parameter'/>
                            <field name='test_method'/>
                        </group>
                        <group style="width:100%">
                            <field class="set_result_class" name='result'/>
                            <field name='datasheet'/>
                            <field name="spreadsheet_template"/>

                            
                        </group>
                        <group style="width:50%">
                            <field name='button' widget="datasheet" nolabel="1"/>
                        </group>


                        <group style="width:50%">
                            <field name='set_result_button' widget="set_result" nolabel="1"/>
                        </group>
                        <!-- <group style="width:100%">                    
                            <field name='result_json'/>
                        </group> -->
                    </sheet>
                </form>
            </field>
        </record>


        <record id="lerm_eln_tree" model="ir.ui.view">
            <field name="name">lerm.eln.tree</field>
            <field name="model">lerm.eln</field>
            <field name="arch" type="xml">
                <tree>
                    <!-- <field name='eln_id' optional="show"/> -->
                    <field name='srf_id' optional="show"/>
                    <field name='sample_id' optional="show"/>
                    <field name='technician' optional="show"/>
                    <field name='srf_date' optional="show"/>
                    <field name='kes_no' optional="show"/>
                    <field name='discipline' optional="show"/>
                    <field name='group' optional="show"/>
                    <field name='material' optional="show"/>
                    <field name='witness_name' optional="show"/>
                    <field name='casting_date' optional="show"/>
                </tree>
            </field>
        </record>


        <record id="eln_result_update_wizard" model="ir.ui.view">
            <field name="name">eln.update.result.wizard</field>
            <field name="model">eln.update.result.wizard</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <group style="width:100%">
                            <!-- <field name='results'/> -->
                            <field name="results" widget="one2many_list">
                                <tree editable="bottom">
                                    <field name="parameter"/>
                                    <!-- <field name='test_method'/> -->
                                    <field name='result' />
                                </tree>
                            </field>
                        </group>

                    </sheet>
                    <footer>
                        <button name="update_result" string="Update Result" type="object" class="btn-primary"/>
                        <!-- <button name="close_sample_wizard" string="Close" type="object"/> -->
                    </footer>
                </form>
            </field>
        </record>


        <record id="eln_result_update_wizard_action" model="ir.actions.act_window">
            <field name="name">Update Result</field>
            <field name="res_model">eln.update.result.wizard</field>
            <field name="view_mode">form</field>
            <field name="view_id" ref="lerm_civil.eln_result_update_wizard"/>
            <field name="target">new</field>
        </record>
<!-- 
        <record id="parameter_calculation_wizard_action" model="ir.actions.act_window">
            <field name="name">Calculation Wizard</field>
            <field name="res_model">parameter.calculation.wizard</field>
            <field name="view_mode">form</field>
            <field name="view_id" ref="lerm_civil.parameter_calculation_wizard"/>
            <field name="target">new</field>
        </record> -->

        <record id="parameter_calculation_wizard" model="ir.ui.view">
        <field name="name">parameter.calculation.wizard.form</field>
        <field name="model">parameter.calculation.wizard</field>
        <field name="arch" type="xml">
            <form string="Your Wizard">
                <group>
                    <field name="parameter"/>
                    <field name="time_based"/>
                </group>
                <notebook>
                    <page string="Input Lines">
                        <field name="inputs_lines" >
                            <tree editable="bottom">
                                <field name="wizard_id" invisible="1"/>
                                <field name="inputs_id" invisible="1"/>
                                <field name="parameter_result"/>
                                <field name="is_parameter_dependent"/>
                                <field name="identifier"/>
                                <field name="inputs" />
                                <field name="value" attrs="{'readonly':[('parent.time_based','=',True)]}" />
                                <field name="date_time" attrs="{'column_invisible': [('parent.time_based','=',False)]}" />
                            </tree>
                        </field>
                        <group>
                            <field name="result"/>
                            <!-- <field name="result_char"/> -->
                            <field name="nabl_status" readonly="1" invisible="1"/>
                            <field name="conformity_status" readonly="1"  invisible="1"/>
                        </group>

                    </page>
                    

                </notebook>
                <footer>
                    <button name="update_result" string="Update" type="object" class="btn-primary"/>
                </footer>
            </form>
        </field>
    </record>



    </data>
</odoo>