<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="srf_form_id" model="ir.actions.act_window">
        <field name="name">SRF</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">lerm.civil.srf</field>
        <field name="view_mode">tree,kanban,form</field>
        <!-- <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">Test Method</p>
        </field> -->
    </record>
    <menuitem id="srf_form" name="SRF" parent="lerm_transaction_data" action="srf_form_id" sequence="10" />

    <record id="lerm_civil_srf_form" model="ir.ui.view">
        <field name="name">lerm.civil.srf.form</field>
        <field name="model">lerm.civil.srf</field>
        <field name="arch" type="xml">
            <form>
            <header>
                <button
                    type="object"
                    name="confirm_srf"
                    string="Confirm"
                    attrs="{'invisible': [('state', 'in', ('2-confirm'))]}"
                    />       
                                 
                    <field   readonly="1" name="state" widget="statusbar"/>
            </header>
                <sheet>
                    <group style="width:50%">
                        <field name="srf_id"/>
                        <field name="kes_number"/>
                        <field name="srf_date"/>
                        <field name="contact_person" domain="[('id', 'in', contact_contact_ids)]"/>
                        <field name="site_address" domain="[('id', 'in', contact_site_ids)]"/>
                        <field name="client_refrence"/>
                    </group>
                    <group style="width:50%">
                        <field name="customer"/>
                        <field name="contact_other_ids" invisible='1'/>
                        <field name="billing_customer" domain="[('id', 'in', contact_other_ids)]"/>
                        <field name="name_work"/>
                        <field name="attachment" filename="attachment_name" />
                        <field name='attachment_name' invisible='1'/>
                    </group>
                    <!-- <group style="width:33.33%">
                    </group> -->
                    <group style="width:50%">
                        <field name="contact_site_ids" invisible='1'/>
                        <!-- <field name='name_of_work'/> -->
                        <field name="contact_contact_ids" invisible='1'/>
                    </group>
                    <group style="width:100%">
                        <button name="open_sample_add_wizard" string="Add Sample" type="object" class="btn-primary"/>
                    </group>
                    <field attrs="{'readonly': [('state', 'in', ('2-confirm'))]}" name="samples" context = "{'default_customer_id' : customer,'is_local': True}">
                        <tree>
                            <field name="sample_no"/>
                            <field name="material_id"/>
                            <field name="discipline_id"/>
                            <field name="group_id"/>
                            <field name='parameters' widget="many2many_tags"/>
                            <field name='casting'/>
                            <!-- <field name="sample_quantity"/> -->
                            <field name="sample_received_date"/>
                        </tree>
                    </field>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name= "message_ids" widget="mail_thread"/>
                    <field name= "activity_ids" widget="mail_activity"/>
                </div>
            </form>
        </field>
    </record>


    <record id="lerm_civil_srf_tree" model="ir.ui.view">
        <field name="name">lerm.civil.srf.tree</field>
        <field name="model">lerm.civil.srf</field>
        <field name="arch" type="xml">
            <tree>
                <field name="srf_id"/>
                <field name="srf_date"/>
                <field name="customer"/>
                <field name="contact_person" />
                <field name="billing_customer" />
                <field name="name_work"/>
                <field name="client_refrence"/>
            </tree>
        </field>
    </record>
    

    <record id="srf_sample_wizard_form" model="ir.ui.view">
        <field name="name">create.srf.sample.wizard</field>
        <field name="model">create.srf.sample.wizard</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <group style="width:50%">
                        <!-- <field name="sample_id"/> -->
                        <field name="discipline_id"/>
                        <field name="material_id" />
                        <field name="brand"/>
                        <field name="grade_id"/>
                        <field name="received_by_id"/>
                        <field name="sample_condition"/>
                        <!-- <field name="material_ids" invisible='1'/>
                        <field name="grade_ids" invisible='1'/> -->
                    </group>
                    <group style="width:50%">
                        <field name="group_id"/>
                        <field name="alias"/>
                        <field name="size_id" />
                        <field name="qty_id" />
                        <field name="sample_received_date"/>
                        <field name="location"/>
                        <field name="casting" />
                        <!-- <field name="group_ids" invisible='1'/>
                        <field name="size_ids" invisible='1'/>
                        <field name="qty_ids" invisible='1'/> -->
                    </group>
                    <group style="width:100%">
                        <field name="sample_reject_reason" attrs="{'required': [('sample_condition','=','non_satisfactory')]}"/>
                    </group>
                    <group style="width:50%">
                        <field name="witness"/>
                    </group>
                    <group style="width:50%">
                        <field name="scope"/>
                    </group>
                    <group style="width:100%">
                        <field name="sample_description"/>
                    </group>
                    <group style="width:50%">
                        <field name="customer_id" invisible='1'/>
                        
                    </group>
                    <group style="width:50%">
                        <field name="days_casting" attrs="{'invisible':[('casting','!=',True)]}"/>
                    </group>

                    <group style="width:100%">
                        <!-- <field name="parameters_ids" invisible="1"/> -->
                        <field name="parameters" options="{'no_create': True}" >
                            <tree>
                                <field name="parameter_name"/>
                                <field name="test_method"/>
                            </tree>
                        </field>
                    </group>
                </sheet>
                <footer>
                        <button name="add_sample" string="Create Sample" type="object" class="btn-primary"/>
                        <button name="close_sample_wizard" string="Close" type="object"/>
                </footer>
            </form>
        </field>
    </record>

    <record id="open_srf_sample_wizard_action" model="ir.actions.act_window">
        <field name="name">Add Sample</field>
        <field name="res_model">create.srf.sample.wizard</field>
        <field name="view_mode">form</field>
        <field name="view_id" ref="lerm_civil.srf_sample_wizard_form"/>
        <field name="target">new</field>
    </record>


  
</odoo>
